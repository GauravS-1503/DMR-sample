(function(){const d=document.createElement("link").relList;if(d&&d.supports&&d.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const n of i.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&s(n)}).observe(document,{childList:!0,subtree:!0});function c(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(a){if(a.ep)return;a.ep=!0;const i=c(a);fetch(a.href,i)}})();function t(e,d={},c=[]){const s=document.createElement(e);for(const[i,n]of Object.entries(d||{}))i.startsWith("on")&&typeof n=="function"?s.addEventListener(i.slice(2),n):i==="className"?s.className=n:i in s?s[i]=n:s.setAttribute(i,n);const a=c==null?[]:Array.isArray(c)?c:[c];for(const i of a)i!=null&&(typeof i=="string"||typeof i=="number"?s.appendChild(document.createTextNode(String(i))):s.appendChild(i));return s}function P(e,d){e.innerHTML="",e.appendChild(d)}function p(e,d="#/"){return t("div",{className:"layout"},[t("aside",{className:"sidebar"},[t("div",{className:"brand"},"ðŸ¦· DentEMR"),(()=>{const s=t("nav",{className:"nav"}),a=[["Dashboard","#/"],["Patients","#/patients"],["Appointments","#/appointments"],["Treatments","#/treatments"],["Billing","#/billing"],["Settings","#/settings"]];for(const[i,n]of a){const o=t("a",{href:n,className:location.hash===n||n==="#/"&&location.hash===""?"active":""},[i]);s.appendChild(o)}return s})(),t("div",{className:"muted",style:"position:absolute; bottom:12px"},["v0.1"])]),t("main",{},[t("div",{className:"topbar"},[t("div",{},[t("strong",{},"Dentist EMR Template")," â€“ demo only"]),t("div",{className:"row"},[t("input",{className:"input",placeholder:"Quick searchâ€¦",oninput:s=>{const a=new CustomEvent("global-search",{detail:s.target.value.trim()});window.dispatchEvent(a)}})])]),t("section",{className:"content"},[e])])])}const D="dentist-emr-state-v1",w={patients:[{id:"P-0001",name:"Aisha Khan",age:29,sex:"F",phone:"9876543210",notes:"Orthodontic follow-up",allergies:"Penicillin"},{id:"P-0002",name:"Rahul Mehta",age:41,sex:"M",phone:"9820001111",notes:"Root canal completed",allergies:"-"}],appointments:[{id:"A-1001",patientId:"P-0001",date:new Date().toISOString().slice(0,10),time:"11:00",purpose:"Braces Adjustment",status:"SCHEDULED"},{id:"A-1002",patientId:"P-0002",date:new Date().toISOString().slice(0,10),time:"15:30",purpose:"Crown Fitting",status:"SCHEDULED"}],treatments:[{id:"T-2001",patientId:"P-0002",date:new Date().toISOString().slice(0,10),procedure:"Root Canal",tooth:"36",dentist:"Dr. Rao",notes:"Medication advised",cost:4500}],bills:[]};let u=JSON.parse(localStorage.getItem(D)||"null")||w;const C=new Set;function f(){return u}function g(){localStorage.setItem(D,JSON.stringify(u));for(const e of C)e(u)}function A(e){u.patients.push(e),g()}function T(e){return u.patients.find(d=>d.id===e)}function B(e){u.appointments.push(e),g()}function L(e,d){const c=u.appointments.find(s=>s.id===e);c&&(c.status=d,g())}function O(e){u.treatments.push(e),g()}function $(e){u.bills.push(e),g()}function x(){const e=f(),d=t("div",{className:"grid cols-3"},[b("Patients",e.patients.length),b("Appointments Today",e.appointments.filter(s=>s.date===new Date().toISOString().slice(0,10)).length),b("Treatments Recorded",e.treatments.length)]),c=t("div",{className:"card"},[t("h3",{},"Todayâ€™s Appointments"),t("table",{className:"table"},[t("thead",{},[t("tr",{},[N("Time"),N("Patient"),N("Purpose"),N("Status")])]),t("tbody",{},e.appointments.slice(0,5).map(s=>t("tr",{},[v(s.time),v((e.patients.find(a=>a.id===s.patientId)||{}).name||s.patientId),v(s.purpose),v(M(s.status))])))])]);return p(t("div",{className:"grid"},[d,c]))}const b=(e,d)=>t("div",{className:"card"},[t("div",{className:"muted"},e),t("div",{style:"font-size:32px; font-weight:700"},String(d))]),N=e=>t("th",{},e),v=e=>t("td",{},e),M=e=>t("span",{className:e==="SCHEDULED"?"badge b-warn":e==="COMPLETED"?"badge b-ok":"badge b-danger"},e);function U(){const e=f(),d=t("div",{}),c=()=>{const n=e.patients.map(o=>t("tr",{},[t("td",{},o.id),t("td",{},t("a",{href:`#/patient?id=${encodeURIComponent(o.id)}`},o.name)),t("td",{},`${o.age}`),t("td",{},o.sex),t("td",{},o.phone),t("td",{},o.allergies||"-")]));return t("div",{className:"card"},[t("div",{className:"row",style:"justify-content: space-between"},[t("h3",{},"Patients"),t("button",{className:"btn",onclick:()=>s()},"+ New Patient")]),t("table",{className:"table"},[t("thead",{},[t("tr",{},["ID","Name","Age","Sex","Phone","Allergies"].map(o=>t("th",{},o)))]),t("tbody",{},n)])])};function s(){const n="P-"+Math.random().toString(36).slice(2,6).toUpperCase(),o=t("div",{className:"card"},[t("h3",{},"Add Patient"),t("div",{className:"grid cols-2"},[a("ID",n,!0),a("Name"),a("Age"),a("Sex (M/F)"),a("Phone"),a("Allergies")]),t("div",{className:"grid"},[t("label",{},"Notes"),t("textarea",{id:"p-notes",rows:3,className:"input"})]),t("div",{className:"row",style:"justify-content:flex-end"},[t("button",{className:"btn ghost",onclick:()=>i()},"Cancel"),t("button",{className:"btn",onclick:()=>{const l={id:n,name:document.getElementById("f-Name").value.trim(),age:Number(document.getElementById("f-Age").value||0),sex:document.getElementById("f-Sex (M/F)").value.trim().toUpperCase().startsWith("F")?"F":"M",phone:document.getElementById("f-Phone").value.trim(),allergies:document.getElementById("f-Allergies").value.trim(),notes:document.getElementById("p-notes").value.trim()};A(l),i()}},"Save")])]);d.replaceChildren(o)}function a(n,o="",l=!1){return t("div",{},[t("label",{},n),t("input",{id:`f-${n}`,className:"input",value:o,readonly:l})])}function i(){d.replaceChildren(c())}return i(),p(d,"#/patients")}function k(e){return new URLSearchParams(location.hash.split("?")[1]||"").get(e)}function R(){const e=k("id"),d=f(),c=T(e);if(!c)return p(t("div",{},["Patient not found."]));const s=d.appointments.filter(n=>n.patientId===e),a=d.treatments.filter(n=>n.patientId===e),i=t("div",{className:"card"},[t("h3",{},"Add Treatment"),t("div",{className:"grid cols-3"},[h("Date",new Date().toISOString().slice(0,10)),h("Procedure","Filling"),h("Tooth","11"),h("Dentist","Dr. Rao"),h("Cost","1000")]),t("div",{className:"grid"},[t("label",{},"Notes"),t("textarea",{id:"f-Notes",rows:3,className:"input"})]),t("div",{className:"row",style:"justify-content:flex-end"},[t("button",{className:"btn",onclick:()=>{const n={id:"T-"+Math.random().toString(36).slice(2,6).toUpperCase(),patientId:e,date:document.getElementById("f-Date").value,procedure:document.getElementById("f-Procedure").value,tooth:document.getElementById("f-Tooth").value,dentist:document.getElementById("f-Dentist").value,cost:Number(document.getElementById("f-Cost").value||0),notes:document.getElementById("f-Notes").value};O(n),location.reload()}},"Save Treatment")])]);return p(t("div",{className:"grid"},[t("div",{className:"card"},[t("h2",{},c.name),t("div",{className:"muted"},`ID ${c.id} Â· ${c.sex} Â· ${c.age} yrs Â· ${c.phone}`),t("p",{},["Allergies: ",t("strong",{},c.allergies||"None")]),t("p",{},["Notes: ",c.notes||"-"])]),t("div",{className:"card"},[t("h3",{},"Appointments"),t("table",{className:"table"},[t("thead",{},t("tr",{},["Date","Time","Purpose","Status"].map(n=>t("th",{},n)))),t("tbody",{},s.map(n=>t("tr",{},[n.date,n.time,n.purpose,n.status].map(o=>t("td",{},o)))))])]),t("div",{className:"card"},[t("h3",{},"Treatments"),t("table",{className:"table"},[t("thead",{},t("tr",{},["Date","Procedure","Tooth","Dentist","Cost"].map(n=>t("th",{},n)))),t("tbody",{},a.map(n=>t("tr",{},[n.date,n.procedure,n.tooth,n.dentist,`â‚¹${n.cost}`].map(o=>t("td",{},o)))))])]),i]),"#/patients")}const h=(e,d="")=>t("div",{},[t("label",{},e),t("input",{id:`f-${e}`,className:"input",value:d})]);function j(){const e=f(),d=t("div",{});function c(){const n=t("div",{className:"card"},[t("div",{className:"row",style:"justify-content: space-between"},[t("h3",{},"Appointments"),t("button",{className:"btn",onclick:()=>s()},"+ New Appointment")]),t("table",{className:"table"},[t("thead",{},t("tr",{},["ID","Patient","Date","Time","Purpose","Status","Action"].map(o=>t("th",{},o)))),t("tbody",{},e.appointments.map(o=>t("tr",{},[t("td",{},o.id),t("td",{},(e.patients.find(l=>l.id===o.patientId)||{}).name||o.patientId),t("td",{},o.date),t("td",{},o.time),t("td",{},o.purpose),t("td",{},o.status),t("td",{},t("button",{className:"btn",onclick:()=>{L(o.id,o.status==="SCHEDULED"?"COMPLETED":"SCHEDULED"),c()}},o.status==="SCHEDULED"?"Mark Done":"Re-schedule"))])))])]);d.replaceChildren(n)}function s(){const n="A-"+Math.random().toString(36).slice(2,6).toUpperCase(),o=t("div",{className:"card"},[t("h3",{},"New Appointment"),t("div",{className:"grid cols-3"},[a("ID",n,!0),t("div",{},[t("label",{},"Patient"),(l=>{const r=t("select",{id:"f-pid",className:"input"});return l.forEach(m=>r.appendChild(t("option",{value:m.id},`${m.name} (${m.id})`))),r})(e.patients)]),a("Date",new Date().toISOString().slice(0,10)),a("Time","10:00"),a("Purpose","Check-up")]),t("div",{className:"row",style:"justify-content:flex-end"},[t("button",{className:"btn ghost",onclick:()=>c()},"Cancel"),t("button",{className:"btn",onclick:()=>{B({id:n,patientId:document.getElementById("f-pid").value,date:i("Date"),time:i("Time"),purpose:i("Purpose"),status:"SCHEDULED"}),c()}},"Save")])]);d.replaceChildren(o)}const a=(n,o="",l=!1)=>t("div",{},[t("label",{},n),t("input",{id:`f-${n}`,className:"input",value:o,readonly:l})]),i=n=>document.getElementById(`f-${n}`).value.trim();return c(),p(d,"#/appointments")}function F(){const e=f(),d=e.treatments.map(s=>t("tr",{},[t("td",{},s.id),t("td",{},(e.patients.find(a=>a.id===s.patientId)||{}).name||s.patientId),t("td",{},s.date),t("td",{},s.procedure),t("td",{},s.tooth),t("td",{},s.dentist),t("td",{},"â‚¹"+s.cost)])),c=t("div",{className:"card"},[t("h3",{},"Treatments"),t("table",{className:"table"},[t("thead",{},t("tr",{},["ID","Patient","Date","Procedure","Tooth","Dentist","Cost"].map(s=>t("th",{},s)))),t("tbody",{},d)])]);return p(c,"#/treatments")}function H(){const e=f(),d=t("div",{});function c(){const n=e.bills.map(l=>t("tr",{},[t("td",{},l.id),t("td",{},(e.patients.find(r=>r.id===l.patientId)||{}).name||l.patientId),t("td",{},l.date),t("td",{},l.items.map(r=>`${r.name} (â‚¹${r.amount})`).join(", ")),t("td",{},"â‚¹"+l.items.reduce((r,m)=>r+m.amount,0)),t("td",{},l.status)])),o=t("div",{className:"card"},[t("div",{className:"row",style:"justify-content: space-between"},[t("h3",{},"Bills"),t("button",{className:"btn",onclick:()=>s()},"+ New Bill")]),t("table",{className:"table"},[t("thead",{},t("tr",{},["ID","Patient","Date","Items","Total","Status"].map(l=>t("th",{},l)))),t("tbody",{},n)])]);d.replaceChildren(o)}function s(){const n="B-"+Math.random().toString(36).slice(2,6).toUpperCase(),o=t("div",{className:"card"},[t("h3",{},"New Bill"),t("div",{className:"grid cols-3"},[a("ID",n,!0),t("div",{},[t("label",{},"Patient"),(l=>{const r=t("select",{id:"b-pid",className:"input"});return l.forEach(m=>r.appendChild(t("option",{value:m.id},`${m.name} (${m.id})`))),r})(e.patients)]),a("Date",new Date().toISOString().slice(0,10)),a("Item 1","Consultation"),a("Amount 1","500"),a("Item 2",""),a("Amount 2","")]),t("div",{className:"row",style:"justify-content:flex-end"},[t("button",{className:"btn ghost",onclick:()=>c()},"Cancel"),t("button",{className:"btn",onclick:()=>{const l=[],r=i("Item 1"),m=Number(i("Amount 1")||0);r&&l.push({name:r,amount:m});const y=i("Item 2"),E=Number(i("Amount 2")||0);y&&l.push({name:y,amount:E}),$({id:n,patientId:document.getElementById("b-pid").value,date:i("Date"),items:l,status:"UNPAID"}),c()}},"Save")])]);d.replaceChildren(o)}const a=(n,o="",l=!1)=>t("div",{},[t("label",{},n),t("input",{id:`f-${n}`,className:"input",value:o,readonly:l})]),i=n=>document.getElementById(`f-${n}`).value.trim();return c(),p(d,"#/billing")}function K(){const e=t("div",{className:"card"},[t("h3",{},"Settings"),t("p",{className:"muted"},"This is a static template. Add clinic profile, users/roles, export/import, etc.")]);return p(e,"#/settings")}const I={"":x,"#/patients":U,"#/patient":R,"#/appointments":j,"#/treatments":F,"#/billing":H,"#/settings":K};function J(){const e=location.hash.split("?")[0];return I[e]||I[""]}function S(){const d=J()(),c=document.getElementById("app");P(c,d)}window.addEventListener("hashchange",S);window.addEventListener("load",S);
